{"version":3,"sources":["assets/Script/BetAreaLayout.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BetArea from \"./BetArea\";\nimport Config from \"./Common/Config\";\n\nconst {ccclass, property} = cc._decorator;\n\nconst AREA_PREFAB = 'BetAreaPrefab';\nconst AREA_TYPES = Config.AREA_TYPES;\nconst VIEW_EVENT = {\n    ON_CLICK_AREA: \"BET_AREA_LAYOUT_CLICK_AREA\"\n};\n\n@ccclass\nexport default class BetAreaLayout extends cc.Component {\n    readonly VIEW_EVENT = VIEW_EVENT;\n    private _areas: BetArea[];\n    private _eventDispatcher: Function;\n\n    onLoad(){\n        cc.resources.load(AREA_PREFAB, this._onPrefabLoaded.bind(this));\n    };\n\n    getTotalBetScore(): number{\n        let scores = this.getBetScores();\n        let totalScore = 0;\n        scores.forEach((score) => totalScore += score);\n        return totalScore;\n    };\n\n    getBetScores(): number[]{\n        let scores = [];\n        for(let idx = 0; idx < this._areas.length; idx++) {\n            scores[idx] = this._areas[idx].getBetCoin();\n        };\n        return scores;\n    };\n\n    setTouchEnabled(isEnabled: boolean){\n        this._areas.forEach((area) => area.setTouchEnabled(isEnabled));\n    };\n\n    setEventDispatcher(eventDispatcher: Function){\n        this._eventDispatcher = eventDispatcher;\n    };\n\n    showBetAnim(areaIndex: number, chipValue: number){\n        let area = this._areas[areaIndex];\n        area.setBetCoin(area.getBetCoin() + chipValue);\n        this._areas[areaIndex].showBet(chipValue);\n    };\n\n    reset(){\n        this._areas.forEach((area) => area.reset());\n    };\n\n    confirmBet(){\n        this._areas.forEach((area) => {\n            area.confirmBet();\n            area.setAllreadyBetCoin(area.getAllreadyBetCoin() + area.getBetCoin());\n            area.setBetCoin(0);\n        });\n    };\n\n    cancelBet(){\n        this._areas.forEach((area) => {\n            area.cancelBet();\n            area.setBetCoin(0);\n        });\n    };\n\n    private _onEventListener(event: any, data: any){\n        let area = this._areas[0];\n        if (event == area.VIEW_EVENT.ON_CLICK_BET_AREA)\n            this._eventDispatcher(VIEW_EVENT.ON_CLICK_AREA, data);\n    };\n\n    private _onPrefabLoaded(error: Error, asset: cc.Asset){\n        this._areas = this._createBetAreas(asset as cc.Prefab);\n    };\n\n    private _createBetAreas(prefab: cc.Prefab): BetArea[]{\n        let areas = [];\n        let node = null;\n        let betArea = null;\n        let eventDispatcher = this._onEventListener.bind(this);\n        for(let idx = 0; idx < AREA_TYPES.length; idx++){\n            node = cc.instantiate(prefab);\n            this.node.addChild(node);\n            betArea = node.getComponent(BetArea);\n            betArea.setEventDispatcher(eventDispatcher);\n            betArea.setAreaIndex(idx);\n            betArea.setAreaName(AREA_TYPES[idx]);\n            betArea.registerClickEvent();\n            areas[idx] = betArea;\n        };\n        return areas;\n    };\n}\n"]}