{"version":3,"sources":["assets/Script/ChipButtonLayout.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Config from \"./Common/Config\";\nimport ChipButton from \"./ChipButton\";\nimport ChipStyle from \"./Style/ChipStyle\";\n\nconst {ccclass, property} = cc._decorator;\n\nconst CHIP_BUTTON_PREFAB = 'ChipButtonPrefab';\nconst SELECT_Y_DIFF = 20;\nconst CHIP_VALUES = Config.CHIP_VALUES;\n\n@ccclass\nexport default class ChipButtonLayout extends cc.Component {\n    private _selectedIndex: number = null;\n    private _chipButtons: cc.Node[];\n\n    onLoad() {\n        this._selectedIndex = null;\n        this._chipButtons = [];\n        cc.resources.load(CHIP_BUTTON_PREFAB, this._onPrefabLoaded.bind(this));\n    };\n\n    getSelectValue(){\n        return CHIP_VALUES[this._selectedIndex];\n    };\n\n    setSelectChip(selectIndex: number){\n        if (this._selectedIndex == selectIndex) {\n            return;\n        };\n        \n        // 初始化的时候 index 可能为 null;\n        this._chipButtons[this._selectedIndex]?.setPosition(0, 0);\n        this._chipButtons[selectIndex].setPosition(0, SELECT_Y_DIFF);\n        this._selectedIndex = selectIndex;\n    };\n\n    private _onEventListener(event, data){\n        let chipButton = this._chipButtons[0].getComponent(ChipButton);\n        if (event == chipButton.VIEW_EVENT.ON_CLICK_CHIP_BUTTON) {\n            this.setSelectChip(data);\n        };\n    };\n\n    private _onPrefabLoaded(error: Error, asset: cc.Asset){\n        let prefab = asset as cc.Prefab;\n        this._chipButtons = this._createChipButtons(prefab);\n        this.setSelectChip(0);\n    };\n\n    private _createChipButtons(prefab: cc.Prefab): cc.Node[]{\n        let chipButtons = [];\n        let eventDispatcher = this._onEventListener.bind(this);\n        let node = null;\n        let chipButton = null;\n        for(let idx = 0; idx < CHIP_VALUES.length; idx++){\n            node = cc.instantiate(prefab);\n            this.node.addChild(node);\n            node.getComponent(ChipStyle).setChipValue(CHIP_VALUES[idx]);\n            chipButton = node.getComponent(ChipButton);\n            chipButton.setChipIndex(idx);\n            chipButton.setEventDispatcher(eventDispatcher);\n            chipButton.registerClickEvent();\n            chipButtons[idx] = node;\n        };\n        return chipButtons;\n    };\n}\n"]}