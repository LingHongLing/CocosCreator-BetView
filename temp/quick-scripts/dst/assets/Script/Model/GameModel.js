
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Model/GameModel.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'adafcU2a7BDUJkatGe9Hfd9', 'GameModel');
// Script/Model/GameModel.ts

"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
var StateMachine_1 = require("./StateMachine");
var Config_1 = require("../Common/Config");
var GAME_STATE = {
    NEW_ROUND: "new_round",
    SETTLE: "settle",
};
var STATE_TIME = (_a = {},
    _a[GAME_STATE.NEW_ROUND] = 30 * 1000,
    _a[GAME_STATE.SETTLE] = 10 * 1000,
    _a);
var MODEL_EVENT = {
    NEW_ROUND: "NEW_ROUND",
    SETTLE: "SETTLE",
    SYNC_USER_SCORE: "SYNC_USER_SCORE",
};
var INTERVAL_TIME = 1 * 1000;
var GameModel = /** @class */ (function () {
    function GameModel(eventDispatcher) {
        this.MODEL_EVENT = MODEL_EVENT;
        this._eventDispatcher = eventDispatcher;
        this._intervalHandler = null;
        this._userScore = Config_1.default.GAME_BEGIN_SCORE;
        this._betScores = [0, 0, 0];
        // 模拟 server 来封包
        this._stateMachine = this._createStateMachine();
    }
    ;
    GameModel.prototype.login = function () {
        var _this = this;
        this._stateMachine.transferState(GAME_STATE.NEW_ROUND, 0);
        this._intervalHandler = setInterval(function () { return _this._update(INTERVAL_TIME); }, INTERVAL_TIME);
    };
    ;
    GameModel.prototype.leave = function () {
        clearInterval(this._intervalHandler);
        this._intervalHandler = null;
    };
    ;
    GameModel.prototype.userBet = function (betScores) {
        for (var idx = 0; idx < betScores.length; idx++) {
            this._betScores[idx] += betScores[idx];
            this._userScore -= betScores[idx];
        }
        ;
        var struct = {
            userScore: this._userScore,
        };
        this._eventDispatcher(MODEL_EVENT.SYNC_USER_SCORE, struct);
    };
    ;
    GameModel.prototype._update = function (dt) {
        this._stateMachine.update(dt);
    };
    ;
    GameModel.prototype._onNewRound = function () {
        var stateTime = STATE_TIME[GAME_STATE.NEW_ROUND];
        var struct = {
            userScore: this._userScore,
            stateTime: stateTime
        };
        this._betScores = [0, 0, 0];
        this._eventDispatcher(MODEL_EVENT.NEW_ROUND, struct);
        this._stateMachine.transferState(GAME_STATE.SETTLE, stateTime);
    };
    ;
    GameModel.prototype._onSettle = function () {
        var stateTime = STATE_TIME[GAME_STATE.SETTLE];
        var winArea = Math.floor(Math.random() * Config_1.default.AREA_TYPES.length);
        var winScore = this._getWinScore(winArea);
        this._userScore += winScore;
        var struct = {
            userScore: this._userScore,
            winArea: winArea,
            settleScore: winScore,
            stateTime: stateTime
        };
        this._eventDispatcher(MODEL_EVENT.SETTLE, struct);
        this._stateMachine.transferState(GAME_STATE.NEW_ROUND, stateTime);
    };
    ;
    GameModel.prototype._getWinScore = function (winArea) {
        var winScore = 0;
        for (var idx = 0; idx < this._betScores.length; idx++)
            winScore += idx == winArea ? this._betScores[idx] * (Config_1.default.AREA_ODDS[idx] + 1) : -this._betScores[idx];
        return winScore;
    };
    ;
    GameModel.prototype._createStateMachine = function () {
        var stateMachine = new StateMachine_1.default();
        stateMachine.addState(GAME_STATE.NEW_ROUND, this._onNewRound.bind(this));
        stateMachine.addState(GAME_STATE.SETTLE, this._onSettle.bind(this));
        return stateMachine;
    };
    ;
    return GameModel;
}());
exports.default = GameModel;
;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvTW9kZWwvR2FtZU1vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLCtDQUEwQztBQUMxQywyQ0FBc0M7QUFHdEMsSUFBTSxVQUFVLEdBQUc7SUFDZixTQUFTLEVBQUUsV0FBVztJQUN0QixNQUFNLEVBQUUsUUFBUTtDQUNuQixDQUFDO0FBRUYsSUFBTSxVQUFVO0lBQ1osR0FBQyxVQUFVLENBQUMsU0FBUyxJQUFHLEVBQUUsR0FBRyxJQUFJO0lBQ2pDLEdBQUMsVUFBVSxDQUFDLE1BQU0sSUFBRyxFQUFFLEdBQUcsSUFBSTtPQUNqQyxDQUFDO0FBRUYsSUFBTSxXQUFXLEdBQUc7SUFDaEIsU0FBUyxFQUFFLFdBQVc7SUFDdEIsTUFBTSxFQUFFLFFBQVE7SUFDaEIsZUFBZSxFQUFFLGlCQUFpQjtDQUNyQyxDQUFDO0FBRUYsSUFBTSxhQUFhLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUUvQjtJQVVJLG1CQUFZLGVBQXlCO1FBVDVCLGdCQUFXLEdBQUcsV0FBVyxDQUFDO1FBVS9CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7UUFDeEMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQztRQUU3QixJQUFJLENBQUMsVUFBVSxHQUFHLGdCQUFNLENBQUMsZ0JBQWdCLENBQUM7UUFDMUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDNUIsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDcEQsQ0FBQztJQUFBLENBQUM7SUFFRix5QkFBSyxHQUFMO1FBQUEsaUJBR0M7UUFGRyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxnQkFBZ0Is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LElBQUksT0FBTyxDQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsZ0JBQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxRyxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0lBQUEsQ0FBQztJQUVNLHVDQUFtQixHQUEzQjtRQUNJLElBQUksWUFBWSxHQUFHLElBQUksc0JBQVksRUFBRSxDQUFDO1FBQ3RDLFlBQVksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3pFLFlBQVksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLE9BQU8sWUFBWSxDQUFDO0lBQ3hCLENBQUM7SUFBQSxDQUFDO0lBQ04sZ0JBQUM7QUFBRCxDQXRGQSxBQXNGQyxJQUFBOztBQUFBLENBQUMiLCJmaWxlIjoiIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RhdGVNYWNoaW5lIGZyb20gXCIuL1N0YXRlTWFjaGluZVwiO1xuaW1wb3J0IENvbmZpZyBmcm9tIFwiLi4vQ29tbW9uL0NvbmZpZ1wiO1xuaW1wb3J0IHsgTmV3Um91bmRNb2RlbFN0cnVjdCwgU2V0dGVNb2RlbFN0cnVjdCwgVXNlclNjb3JlTW9kZWxTdHJ1Y3QgfSBmcm9tIFwiLi4vQ29tbW9uL01vZGVsU3RydWN0XCI7XG5cbmNvbnN0IEdBTUVfU1RBVEUgPSB7XG4gICAgTkVXX1JPVU5EOiBcIm5ld19yb3VuZFwiLFxuICAgIFNFVFRMRTogXCJzZXR0bGVcIixcbn07XG5cbmNvbnN0IFNUQVRFX1RJTUUgPSB7XG4gICAgW0dBTUVfU1RBVEUuTkVXX1JPVU5EXTogMzAgKiAxMDAwLFxuICAgIFtHQU1FX1NUQVRFLlNFVFRMRV06IDEwICogMTAwMCxcbn07XG5cbmNvbnN0IE1PREVMX0VWRU5UID0ge1xuICAgIE5FV19ST1VORDogXCJORVdfUk9VTkRcIixcbiAgICBTRVRUTEU6IFwiU0VUVExFXCIsXG4gICAgU1lOQ19VU0VSX1NDT1JFOiBcIlNZTkNfVVNFUl9TQ09SRVwiLFxufTtcblxuY29uc3QgSU5URVJWQUxfVElNRSA9IDEgKiAxMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lTW9kZWwge1xuICAgIHJlYWRvbmx5IE1PREVMX0VWRU5UID0gTU9ERUxfRVZFTlQ7XG5cbiAgICBwcml2YXRlIF9zdGF0ZU1hY2hpbmU6IFN0YXRlTWFjaGluZTtcbiAgICBwcml2YXRlIF9pbnRlcnZhbEhhbmRsZXI6IGFueTtcbiAgICBwcml2YXRlIF9ldmVudERpc3BhdGNoZXI6IEZ1bmN0aW9uO1xuICAgIC8vIOa4uOaIj+mAu+i+keebuOWFs1xuICAgIHByaXZhdGUgX3VzZXJTY29yZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX2JldFNjb3JlczogbnVtYmVyW107XG5cbiAgICBjb25zdHJ1Y3RvcihldmVudERpc3BhdGNoZXI6IEZ1bmN0aW9uKXtcbiAgICAgICAgdGhpcy5fZXZlbnREaXNwYXRjaGVyID0gZXZlbnREaXNwYXRjaGVyO1xuICAgICAgICB0aGlzLl9pbnRlcnZhbEhhbmRsZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX3VzZXJTY29yZSA9IENvbmZpZy5HQU1FX0JFR0lOX1NDT1JFO1xuICAgICAgICB0aGlzLl9iZXRTY29yZXMgPSBbMCwgMCwgMF07XG4gICAgICAgIC8vIOaooeaLnyBzZXJ2ZXIg5p2l5bCB5YyFXG4gICAgICAgIHRoaXMuX3N0YXRlTWFjaGluZSA9IHRoaXMuX2NyZWF0ZVN0YXRlTWFjaGluZSgpO1xuICAgIH07XG5cbiAgICBsb2dpbigpe1xuICAgICAgICB0aGlzLl9zdGF0ZU1hY2hpbmUudHJhbnNmZXJTdGF0ZShHQU1FX1NUQVRFLk5FV19ST1VORCwgMCk7XG4gICAgICAgIHRoaXMuX2ludGVydmFsSGFuZGxlciA9IHNldEludGVydmFsKCgpID0+IHRoaXMuX3VwZGF0ZShJTlRFUlZBTF9USU1FKSwgSU5URVJWQUxfVElNRSk7XG4gICAgfTtcblxuICAgIGxlYXZlKCl7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWxIYW5kbGVyID0gbnVsbDtcbiAgICB9O1xuXG4gICAgdXNlckJldChiZXRTY29yZXM6IG51bWJlcltdKXtcbiAgICAgICAgZm9yKGxldCBpZHggPSAwOyBpZHggPCBiZXRTY29yZXMubGVuZ3RoOyBpZHgrKyl7XG4gICAgICAgICAgICB0aGlzLl9iZXRTY29yZXNbaWR4XSArPSBiZXRTY29yZXNbaWR4XTtcbiAgICAgICAgICAgIHRoaXMuX3VzZXJTY29yZSAtPSBiZXRTY29yZXNbaWR4XTtcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgc3RydWN0OiBVc2VyU2NvcmVNb2RlbFN0cnVjdCA9IHtcbiAgICAgICAgICAgIHVzZXJTY29yZTogdGhpcy5fdXNlclNjb3JlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9ldmVudERpc3BhdGNoZXIoTU9ERUxfRVZFTlQuU1lOQ19VU0VSX1NDT1JFLCBzdHJ1Y3QpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIF91cGRhdGUoZHQ6IG51bWJlcil7XG4gICAgICAgIHRoaXMuX3N0YXRlTWFjaGluZS51cGRhdGUoZHQpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIF9vbk5ld1JvdW5kKCl7XG4gICAgICAgIGxldCBzdGF0ZVRpbWUgPSBTVEFURV9USU1FW0dBTUVfU1RBVEUuTkVXX1JPVU5EXTtcbiAgICAgICAgbGV0IHN0cnVjdDogTmV3Um91bmRNb2RlbFN0cnVjdCA9IHtcbiAgICAgICAgICAgIHVzZXJTY29yZTogdGhpcy5fdXNlclNjb3JlLFxuICAgICAgICAgICAgc3RhdGVUaW1lOiBzdGF0ZVRpbWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9iZXRTY29yZXMgPSBbMCwgMCwgMF07XG4gICAgICAgIHRoaXMuX2V2ZW50RGlzcGF0Y2hlcihNT0RFTF9FVkVOVC5ORVdfUk9VTkQsIHN0cnVjdCk7XG4gICAgICAgIHRoaXMuX3N0YXRlTWFjaGluZS50cmFuc2ZlclN0YXRlKEdBTUVfU1RBVEUuU0VUVExFLCBzdGF0ZVRpbWUpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIF9vblNldHRsZSgpe1xuICAgICAgICBsZXQgc3RhdGVUaW1lID0gU1RBVEVfVElNRVtHQU1FX1NUQVRFLlNFVFRMRV07XG4gICAgICAgIGxldCB3aW5BcmVhID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQ29uZmlnLkFSRUFfVFlQRVMubGVuZ3RoKTtcbiAgICAgICAgbGV0IHdpblNjb3JlID0gdGhpcy5fZ2V0V2luU2NvcmUod2luQXJlYSk7XG4gICAgICAgIHRoaXMuX3VzZXJTY29yZSArPSB3aW5TY29yZTtcbiAgICAgICAgbGV0IHN0cnVjdDogU2V0dGVNb2RlbFN0cnVjdCA9IHtcbiAgICAgICAgICAgIHVzZXJTY29yZTogdGhpcy5fdXNlclNjb3JlLFxuICAgICAgICAgICAgd2luQXJlYTogd2luQXJlYSxcbiAgICAgICAgICAgIHNldHRsZVNjb3JlOiB3aW5TY29yZSxcbiAgICAgICAgICAgIHN0YXRlVGltZTogc3RhdGVUaW1lXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2V2ZW50RGlzcGF0Y2hlcihNT0RFTF9FVkVOVC5TRVRUTEUsIHN0cnVjdCk7XG4gICAgICAgIHRoaXMuX3N0YXRlTWFjaGluZS50cmFuc2ZlclN0YXRlKEdBTUVfU1RBVEUuTkVXX1JPVU5ELCBzdGF0ZVRpbWUpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIF9nZXRXaW5TY29yZSh3aW5BcmVhOiBudW1iZXIpOiBudW1iZXJ7XG4gICAgICAgIGxldCB3aW5TY29yZSA9IDA7XG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHRoaXMuX2JldFNjb3Jlcy5sZW5ndGg7IGlkeCsrKVxuICAgICAgICAgICAgd2luU2NvcmUgKz0gaWR4ID09IHdpbkFyZWE/IHRoaXMuX2JldFNjb3Jlc1tpZHhdICogKENvbmZpZy5BUkVBX09ERFNbaWR4XSArIDEpOiAtdGhpcy5fYmV0U2NvcmVzW2lkeF07XG4gICAgICAgIHJldHVybiB3aW5TY29yZTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBfY3JlYXRlU3RhdGVNYWNoaW5lKCk6IFN0YXRlTWFjaGluZXtcbiAgICAgICAgbGV0IHN0YXRlTWFjaGluZSA9IG5ldyBTdGF0ZU1hY2hpbmUoKTtcbiAgICAgICAgc3RhdGVNYWNoaW5lLmFkZFN0YXRlKEdBTUVfU1RBVEUuTkVXX1JPVU5ELCB0aGlzLl9vbk5ld1JvdW5kLmJpbmQodGhpcykpO1xuICAgICAgICBzdGF0ZU1hY2hpbmUuYWRkU3RhdGUoR0FNRV9TVEFURS5TRVRUTEUsIHRoaXMuX29uU2V0dGxlLmJpbmQodGhpcykpO1xuICAgICAgICByZXR1cm4gc3RhdGVNYWNoaW5lO1xuICAgIH07XG59OyJdfQ==